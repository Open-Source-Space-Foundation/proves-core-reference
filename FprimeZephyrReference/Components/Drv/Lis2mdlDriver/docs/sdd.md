# Components::Lis2mdlDriver

The LIS2MDL Driver component interfaces with the LIS2MDL magnetometer to provide magnetic field measurements.

## Usage Examples

The LIS2MDL Driver component is designed to be called periodically to collect and return sensor data. It operates as a passive component that responds to manager calls.

### Typical Usage

1. The component is instantiated and initialized during system startup
2. A manager calls the `MagneticFieldRead` port
3. On each call, the component:
   - Fetches fresh sensor samples from the sensor
   - Converts sensor data to F Prime data structures
   - Returns data in SI units

## Class Diagram

```mermaid
classDiagram
    namespace Components {
        class Lis2mdlDriverComponentBase {
            <<Auto-generated>>
        }
        class Lis2mdlDriver {
            - lis2mdl: device*
            + Lis2mdlDriver(char* compName)
            + ~Lis2mdlDriver()
            - magneticFieldRead_handler(FwIndexType portNum): Drv::MagneticField
        }
    }
    Lis2mdlDriverComponentBase <|-- Lis2mdlDriver : inherits
```

## Port Descriptions
| Name | Type | Description |
|---|---|---|
| MagneticFieldRead | sync input | Triggers magnetic field data collection and returns a MagneticField struct |

## Sequence Diagrams

```mermaid
sequenceDiagram
    participant Manager
    participant LIS2MDL Driver
    participant Zephyr Sensor API
    participant LIS2MDL Sensor

    Manager-->>LIS2MDL Driver: Call MagneticFieldRead synchronous input port
    LIS2MDL Driver->>Zephyr Sensor API: Fetch sensor data
    Zephyr Sensor API->>LIS2MDL Sensor: Read sensor
    LIS2MDL Sensor->>Zephyr Sensor API: Return sensor data
    Zephyr Sensor API->>LIS2MDL Driver: Return x, y, z sensor_value structs
    LIS2MDL Driver-->>Manager: Return MagneticField struct
```

## Requirements
Add requirements in the chart below
| Name | Description | Validation |
|---|---|---|
| MagneticFieldRead Port | The component shall provide access magnetic field sensor data and return in common MagneticField struct, readings will be in gauss | Verify output matches expected values from sensor datasheet |

## Change Log
| Date | Description |
|---|---|
| 2025-9-10 | Initial LIS2MDL Driver component |
